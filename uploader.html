<html>
    <head>
        <title>Uploading Files to S3</title>

        <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1.12.min.js"></script>
    </head>

    <body>
        <h1>Upload sermon audio.</h1>

        <input type="file" id="fileinput" accept="audio/*"/><br>
	<button id="upload-button">Upload</button>

        <script type="text/javascript">
	 var bucketName = 'isaac-wfth';
	 AWS.config.region = 'us-east-1';
	 var bucket = new AWS.S3({
	     params: {
		 Bucket: bucketName
	     },
	     accessKeyId: 'AKIAJUSWAKFV37YUH75Q',
	     secretAccessKey: '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'
	 })
	 var fileInput = document.getElementById('fileinput');
	 var button = document.getElementById('upload-button');

	 button.addEventListener('click', function() {
	     var file = fileInput.files[0];
	     if (file) {
		 var params = { Key: file.name, ContentType: file.type, Body: file, ACL: 'public-read' }
		 bucket.putObject(params, function(err, data) {
		     if (err) {
			 console.log(err);
		     } else {
			 console.log("Uploaded! Hurrah!");
		     }
		 })
	     } else {
		 console.log("No file selected.");
	     }
	 }, false);

         document.getElementById('fileinput').addEventListener('change', function() {
             var file = this.files[0];
             console.log("name : " + file.name);
             console.log("file size : " + file.size);
         }, false);
        </script>
    </body>
</html>
